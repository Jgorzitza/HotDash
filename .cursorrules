# HotDash Project Rules â€” Operator Control Center

**Epoch**: 2025.10.E1  
**Owner**: Manager/CEO  
**Applies To**: All Agents and Contributors  
**Last Updated**: 2025-10-14

---

## ğŸ¯ North Star â€” Core Mission

Deliver a trustworthy, operator-first control center embedded inside Shopify Admin that unifies CX, sales, SEO/content, social, and inventory into actionable tiles with agent-assisted approvals. **Evidence or no merge.**

---

## ğŸ”§ MCP-First Development (MANDATORY)

### Critical Rule: Training Data is Outdated

**DO NOT TRUST your training data for:**
- âŒ React Router 7 (you have v6/Remix patterns)
- âŒ Shopify GraphQL API (2023 or older schemas)
- âŒ Shopify App Bridge (you have v2/early v3, we use v3.7+)
- âŒ Any API versioned after 2023

**MUST VERIFY with MCP tools BEFORE implementing:**
- âœ… All Shopify queries â†’ Shopify MCP validation
- âœ… All React Router 7 patterns â†’ Context7 MCP verification
- âœ… All database changes â†’ Supabase MCP verification
- âœ… All deployments â†’ Fly MCP verification
- âœ… All Git operations â†’ GitHub MCP verification

### Development Workflow (MANDATORY ORDER):

1. **Search HotDash codebase FIRST** â†’ Use `grep` tool
2. **Verify with MCP tools SECOND** â†’ Use appropriate MCP (token limit: 800-1500)
3. **Implement THIRD** â†’ Only after verification

### MCP Token Limits:

- **Syntax check**: 500-800 tokens (1-3 examples)
- **Pattern exploration**: 1000-1500 tokens (3-7 examples)
- **Implementation guide**: 2000-3000 tokens (rare, needs approval)
- **Never exceed**: 3000 tokens without manager approval

### Required MCP Usage by Task:

- **Shopify work** â†’ `mcp_shopify_*` tools
- **React Router 7** â†’ `mcp_context7_*` tools
- **Database work** â†’ `mcp_supabase_*` tools
- **Fly deployments** â†’ `mcp_fly_*` tools
- **Git operations** â†’ `mcp_github-official_*` tools

---

## ğŸ“‹ Manager Guardrails (Prevent Process Drift)

### Guardrail 1: NO NEW DOCUMENTATION FILES

**Before creating ANY new .md file, Manager MUST:**
1. Check if existing doc can be updated: `grep -r "topic" docs/`
2. If content fits existing doc â†’ UPDATE that doc, don't create new
3. If truly new â†’ Ask CEO approval first

### Guardrail 2: INDIVIDUAL AGENT FILES ONLY

**Direction updates go in `docs/directions/<agent>.md` ONLY**

**Never Create:**
- âŒ Combined direction documents
- âŒ `EMERGENCY-*.md` direction files
- âŒ `URGENT-*.md` direction files

### Guardrail 3: MCP-FIRST VALIDATION

**Manager MUST use MCPs for technical decisions:**
- Minimum: **5+ MCP calls per day** for technical direction
- Log all MCP usage in `feedback/manager.md`

### Guardrail 4: VERIFY BEFORE ACCEPT

**Never Accept:**
- âŒ "Task complete" without evidence
- âŒ "Deployed" without URL + health check
- âŒ "Fixed" without before/after comparison

### Guardrail 5: ASK BEFORE CREATE

**Before creating any new process/structure/role:**
- Ask CEO first, explain why existing won't work
- Default: Use existing process unless CEO approves

---

## ğŸ“ Feedback Process (Evidence-First)

### File Ownership (STRICTLY ENFORCED):

- âœ… Each agent writes ONLY in `feedback/<agent>.md`
- âŒ Agents NEVER write in `feedback/manager.md`
- âœ… Manager writes ONLY in `feedback/manager.md`

### Required Fields:

```markdown
## [YYYY-MM-DDTHH:MM:SSZ] â€” Title
- Command/Script: <exact command>
- Output/Artifacts: <paths>
- PR/Commit: <link>
- Notes: <summary>
```

---

## ğŸ”’ Security & Secrets (ZERO TOLERANCE)

- âŒ NEVER commit raw secrets
- âœ… Redact with `***REDACTED***`
- âŒ NEVER echo secrets in logs
- âœ… Reference vault paths only

---

## ğŸ“š Documentation Governance

### Single Source of Truth:

1. `docs/runbooks/` â€” Assignments (HIGHEST PRIORITY)
2. `docs/directions/` â€” Execution details
3. `feedback/` â€” Logging ONLY (NEVER direction)

### Forbidden:

- âŒ GDPR work
- âŒ CCPA work
- âŒ Privacy compliance

---

## ğŸš« Forbidden Alternatives

- âŒ `fly` CLI â†’ Use `mcp_fly_*`
- âŒ `psql` â†’ Use `mcp_supabase_*`
- âŒ Manual search â†’ Use `grep` tool

---

## ğŸ”„ Git Policy

### Branch Naming:

- âœ… `agent/<agent>/<molecule>`
- âœ… `hotfix/<slug>`

### Commits:

- Must include evidence links
- Never commit secrets
- Use `--no-pager` for git commands

---

**Enforcement**: STRICT  
**Review**: Weekly by Manager, Monthly by CEO  

**Remember**: Evidence or no merge. MCP-first. Verify before accept.
