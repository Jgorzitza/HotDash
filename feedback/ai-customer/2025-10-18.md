# AI-Customer — Feedback — 2025-10-18

### Shutdown — 01:03 (local time)

**Status**

- Task / Issue: #102 — PR: n/a — Branch: main
- DoD completion: Partial (~40%); Chatwoot health automation green but `/rails/health` still 404.
- What changed since last entry:
  - Chatwoot health script now reads vault env files automatically to avoid shell secret exports.
  - Verified authenticated probe hits `/api/v1/accounts/1` and logs in `artifacts/integrations/2025-10-18/chatwoot_health.jsonl`.

**Evidence**

- Tests/logs/screens: `artifacts/integrations/2025-10-18/chatwoot_health.jsonl`, scripts/ops/check-chatwoot-health.mjs#L34-L159
- Tool calls (MCP/adapters) used: `npm run ops:check-chatwoot-health`, `rg`, `curl`

**Blockers**

- Chatwoot `/rails/health` 404 — **owner**: manager — **ETA**: 2025-10-18

**Next-start plan (first 1–2 actions)**

1. Align with Chatwoot owner to expose a working `/rails/health` endpoint or update health spec.
2. Capture green health check evidence post-fix and attach to feedback + content spec.

**Self-grade (1–5)**

- Progress vs DoD: 3
- Evidence quality: 4
- Alignment (North Star / Rules / Allowed paths): 4
- Tool discipline (MCP-first, no freehand, no secrets): 3
- Communication (feedback clarity & cadence): 3

**Retrospective**

- 2–3 things I did well today:
  1. Restored Chatwoot health automation without exposing secrets.
  2. Logged concrete evidence paths so the manager can verify quickly.
- 1–2 things to do differently tomorrow:
  1. Push earlier on owner alignment for missing `/rails/health` endpoint.
- **One thing I will stop entirely:** Exporting secrets directly to the shell for routine checks.

### Startup — 18:12 (local time)

**Plan**

- Skimmed docs and lane spec; objective remains Issue #102 with Storefront MCP validation focus.
- Confirm allowed paths and tooling; ensure Autopublish stays disabled.
- Prepare to run lane proof call (`codex exec --json -- "mcp shopify-storefront {'action':'tools.list'}"`) once MCP session is ready.

**Immediate actions**

1. Verify MCP connections (Shopify storefront + context7) respond via prescribed proof call.
2. Document command outputs and MCP status in this feedback log; flag blockers if tools error.

**Command log**

- `codex exec --json -- "mcp shopify-storefront {'action':'tools.list'}"` → timed out after 24s; Codex reported missing `shopify-storefront` MCP server and upstream `knowledge` server handshake failure (`400 Bad Request`).
- `codex exec --json -- "mcp shopify_storefront {'action':'tools.list'}"` → timed out (65s); repeated `knowledge` MCP handshake failure; Codex confirmed `shopify_storefront` server not registered.
- Updated `docs/specs/hitl/storefront-mcp.md` with sandbox validation checklist covering MCP registration, proof command expectations, and escalation path.
- Logged escalation entry in `reports/manager/ESCALATION.md` requesting storefront MCP server registration.
- Extended `docs/specs/hitl/storefront-mcp.md` with sample `tools.list` output, evidence capture checklist, and fallback work queue to keep progress moving while MCP remains offline.
- Added `shopify_storefront` server entry to `~/.codex/config.toml` (and repo reference config) pointing at `https://hotroddash.myshopify.com/api/mcp`.
- Re-ran `codex exec --json -- "mcp shopify-storefront {'action':'tools.list'}"` → handshake failure (`unexpected server response: empty sse stream`) despite server registration.
- Fallback: `curl -s -D artifacts/ai-customer/2025-10-18/storefront-tools.headers -o artifacts/ai-customer/2025-10-18/storefront-tools.jsonl -X POST https://hotroddash.myshopify.com/api/mcp -H 'Content-Type: application/json' -d '{"jsonrpc":"2.0","id":1,"method":"tools/list","params":{}}'` → HTTP 200 with full tool list captured.

**Blocker**

- Codex MCP transport expects SSE handshake; Shopify storefront endpoint returns immediate JSON (no stream), causing `codex exec --json -- "mcp shopify-storefront {'action':'tools.list'}"` to fail with `unexpected server response: empty sse stream`. Need guidance on introducing a compatible proxy or acknowledged fallback.
- Reviewed `docs/specs/hitl/programmatic-seo-factory.md` to prep for next lane (Programmatic SEO Factory) per daily sequence; captured current schema + pipeline notes before identifying actionable steps within allowed paths.
- Reviewed `docs/specs/hitl/guided-selling.md` to prep the Guided Selling/Kit Composer sequence item; noted rules graph, feature flags, and open data questions for later execution.
- Reviewed `docs/specs/hitl/seo-telemetry.md` (CWV→$$) to prep analytics sequence; summarized pipeline stages, CWV revenue mapping, and validation requirements for future work.
- Reviewed `docs/specs/hitl/ab-harness.md` to prep the A/B harness sequence item; aligned on cookie assignment, registry fields, proof steps, and HITL promotion workflow.

### Manager Update — 01:38 (local time)

**Issues observed**
- `codex exec --json -- "mcp shopify-storefront {'action':'tools.list'}"` still fails due to SSE handshake mismatch (Shopify responds with immediate JSON). Curl fallback succeeds and artifacts are stored.
- `knowledge` MCP continues to return HTTP 400 during handshake, producing noise each run (no current dependency, but it slows retries).
- Upcoming sequences (Programmatic SEO Factory, Guided Selling, CWV→$$ telemetry, A/B harness) need cross-team alignment already surfaced in the specs; prep is complete but implementation depends on shared inputs.

**Suggestions / expectations for next run**
1. Either provide an SSE-compatible proxy for the storefront MCP endpoint or formally approve the documented HTTP POST fallback so the lane proof can be marked green.
2. Disable or fix the `knowledge` MCP server for this session to eliminate repeated handshake errors while storefront work proceeds.
3. Confirm owners for the pending inputs: metaobject schema finalization (SEO Factory) and horsepower/fuel data source (Guided Selling). With that clarity I can move straight into implementation without additional pauses.
Status → next intent: Resume molecules per reports/manager/lanes/2025-10-19.json (M-001 first).
