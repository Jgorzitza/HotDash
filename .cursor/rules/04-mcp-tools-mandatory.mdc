---
alwaysApply: true
---
# MCP Tools: MANDATORY Before Code

**ALL agents (including Manager) MUST use MCP tools BEFORE writing code.**

## Context7 MCP: Pull Docs First (STRICT)

**Before touching ANY library code, pull official documentation**:

```javascript
// About to use Prisma?
mcp_context7_get-library-docs("/prisma/docs", "multi-schema support")

// About to use React Router 7?
mcp_context7_get-library-docs("/react-router/react-router", "loaders and actions")

// About to use TypeScript?
mcp_context7_get-library-docs("/microsoft/TypeScript", "strict mode")

// About to use Supabase?
mcp_context7_get-library-docs("/supabase/supabase", "connection pooling")

// About to use Google Analytics?
mcp_context7_get-library-docs("/websites/developers_google_analytics...", "credentials")

// About to use OpenAI SDK?
mcp_context7_get-library-docs("/openai/openai-node", "agents")

// About to use LlamaIndex?
mcp_context7_get-library-docs("/run-llama/LlamaIndexTS", "RAG")
```

## Required Libraries for Context7

**Pull docs for these BEFORE using them**:
- React Router 7 (NOT Remix - we use React Router 7)
- Prisma (multi-schema, migrations)
- Polaris (Shopify UI components)
- TypeScript (strict mode, types)
- OpenAI Agents SDK (HITL workflow)
- LlamaIndex (knowledge base, RAG)
- Google Analytics API (credentials, BetaAnalyticsDataClient)
- Search Console API
- Bing Webmaster API
- Supabase JS client library
- Shopify App Bridge
- Any npm package before first use

## Shopify Dev MCP: For Shopify APIs

**Before ANY Shopify GraphQL operation**:

1. `learn_shopify_api(api: "admin")` â†’ get conversationId
2. `search_docs_chunks(conversationId, "your query")`
3. `introspect_graphql_schema(conversationId, "operation name")`
4. `validate_graphql_codeblocks(conversationId, ["your code"])`

## Evidence Format (Log in Feedback)

```md
## HH:MM - Context7: [Library Name]
- Topic: [what I need to learn]
- Key Learning: [specific pattern/requirement discovered]
- Applied to: [files I'll change]
```

## Why This Matters

**Training data is 6-12 months old**. Libraries change constantly.

**Real Impact** (2025-10-20 P0 fixes):
- Without tools: 13 failed deploys, 39 min wasted
- With tools: 3 deploys, 9 min total
- **Savings**: 30 minutes per fix

**See**: [RULES.md](mdc:docs/RULES.md) MCP Tools section for full examples
