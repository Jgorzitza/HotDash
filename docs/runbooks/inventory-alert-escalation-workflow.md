# Inventory Alert Escalation Workflow

**INVENTORY-022: Production Inventory Monitoring & Alerts**

## Overview

This document defines the escalation workflow for inventory alerts in the HotDash production system. It ensures that critical inventory issues are addressed promptly and that appropriate stakeholders are notified based on alert severity and urgency.

## Alert Severity Levels

### Critical (Severity: critical)
- **Definition:** Immediate action required to prevent stockouts or business impact
- **Examples:**
  - Out of stock on high-velocity products
  - Negative stock levels (data integrity issue)
  - Emergency sourcing needed (< 3 days to stockout)
- **Response Time:** Within 1 hour
- **Escalation:** Immediate notification to inventory manager and CEO

### High (Severity: high)
- **Definition:** Urgent attention needed within business day
- **Examples:**
  - Low stock on popular products
  - Reorder point reached (3-7 days to stockout)
  - Vendor delivery delays
- **Response Time:** Within 4 hours
- **Escalation:** Notification to inventory manager

### Medium (Severity: medium)
- **Definition:** Attention needed within 1-2 business days
- **Examples:**
  - Approaching reorder point (7-14 days to stockout)
  - Overstock situations
  - Seasonal inventory adjustments needed
- **Response Time:** Within 24 hours
- **Escalation:** Daily summary to inventory manager

### Low (Severity: low)
- **Definition:** Informational, no immediate action required
- **Examples:**
  - Inventory level changes
  - Successful reorder completions
  - Routine stock adjustments
- **Response Time:** Review during weekly planning
- **Escalation:** Weekly summary report

## Alert Types

### 1. Low Stock Alert
- **Trigger:** Current stock < low stock threshold (typically 20% of average monthly sales)
- **Severity:** High
- **Action:** Review ROP calculation and create purchase order
- **Escalation:** If not acknowledged within 4 hours, escalate to manager

### 2. Out of Stock Alert
- **Trigger:** Current stock = 0 and product is active
- **Severity:** Critical
- **Action:** Immediate emergency sourcing analysis
- **Escalation:** Immediate notification + escalate if not resolved within 1 hour

### 3. Reorder Point Alert
- **Trigger:** Current stock â‰¤ calculated ROP
- **Severity:** High (or Critical if < 3 days to stockout)
- **Action:** Generate purchase order recommendation
- **Escalation:** If not acknowledged within 4 hours (or 1 hour for critical)

### 4. Negative Stock Alert
- **Trigger:** Current stock < 0 (data integrity issue)
- **Severity:** Critical
- **Action:** Investigate data sync issue, reconcile with Shopify
- **Escalation:** Immediate notification to technical team

### 5. Overstock Alert
- **Trigger:** Current stock > 3x average monthly sales
- **Severity:** Medium
- **Action:** Review pricing strategy, consider promotions
- **Escalation:** Weekly review with marketing team

### 6. Emergency Sourcing Alert
- **Trigger:** Stockout risk > 80% and net benefit > $100
- **Severity:** Critical
- **Action:** Evaluate local vendor options, approve emergency PO
- **Escalation:** Immediate notification + CEO approval for POs > $1000

## Escalation Workflow

### Level 1: Automated Alert (0 minutes)
1. Alert generated by monitoring system
2. Stored in `inventory_alert` table
3. Displayed in Inventory Alerts Dashboard (`/inventory/alerts`)
4. Real-time notification via Socket.IO (if connected)

### Level 2: First Notification (Immediate)
1. **Critical alerts:** Immediate email/SMS to inventory manager
2. **High alerts:** Email notification within 5 minutes
3. **Medium/Low alerts:** Batched in hourly digest

### Level 3: Acknowledgment Required
1. Alert must be acknowledged within response time window
2. Acknowledgment captured in database with user ID and timestamp
3. If not acknowledged, proceed to Level 4

### Level 4: Manager Escalation
1. **Critical:** After 1 hour without acknowledgment
2. **High:** After 4 hours without acknowledgment
3. **Medium:** After 24 hours without acknowledgment
4. Escalation email sent to inventory manager and CEO

### Level 5: CEO Escalation
1. **Critical only:** After 2 hours without resolution
2. Direct notification to CEO
3. Incident logged for post-mortem review

## Alert Acknowledgment Process

### Via Dashboard
1. Navigate to `/inventory/alerts`
2. Review alert details
3. Click "Acknowledge" button
4. System records:
   - Acknowledged by (user ID)
   - Acknowledged at (timestamp)
   - Alert status changed to `acknowledged: true`

### Via API
```bash
POST /api/inventory/tracking
Content-Type: application/json

{
  "action": "acknowledge-alert",
  "alertId": "alert-123",
  "acknowledgedBy": "user-456"
}
```

### Acknowledgment Requirements
- User must be authenticated
- User must have inventory management permissions
- Acknowledgment must include action plan or notes (future enhancement)

## Alert Resolution Process

### 1. Assess Situation
- Review alert details (SKU, current stock, threshold, severity)
- Check demand forecast and sales velocity
- Verify data accuracy with Shopify sync

### 2. Determine Action
- **Low Stock/ROP:** Create purchase order
- **Out of Stock:** Emergency sourcing or backorder notification
- **Negative Stock:** Data reconciliation
- **Overstock:** Promotional strategy or price adjustment

### 3. Execute Action
- Create PO via `/api/inventory/po-automation`
- Approve emergency sourcing via Growth Engine action queue
- Update Shopify inventory levels if data issue
- Document action in alert notes

### 4. Verify Resolution
- Confirm action completed (PO sent, inventory adjusted, etc.)
- Update alert status to `resolved`
- Monitor for recurrence

### 5. Post-Resolution Review
- For critical alerts: Document root cause
- Update ROP calculations if needed
- Adjust alert thresholds if false positive

## Automated Actions

### ROP Notifications
- **Trigger:** Product reaches reorder point
- **Automated Action:** Generate PO recommendation in action queue
- **HITL Required:** Yes (for POs > $1000 or first-time vendors)
- **Approval SLA:** 4 hours for high priority, 24 hours for normal

### Emergency Sourcing
- **Trigger:** Stockout risk > 80% and net benefit > $100
- **Automated Action:** Analyze local vendor options
- **HITL Required:** Yes (always)
- **Approval SLA:** 1 hour for critical, 4 hours for high

### Inventory Sync
- **Trigger:** Negative stock or data discrepancy
- **Automated Action:** Trigger Shopify inventory sync
- **HITL Required:** No (automatic reconciliation)
- **Verification:** Alert if sync fails

## Notification Channels

### In-App Notifications
- Real-time alerts via Socket.IO
- Dashboard badge with alert count
- Toast notifications for critical alerts

### Email Notifications
- **Critical:** Immediate individual emails
- **High:** Within 5 minutes
- **Medium/Low:** Hourly digest

### SMS Notifications (Future)
- **Critical only:** For inventory manager and CEO
- **Opt-in:** Users can configure SMS preferences

### Slack Integration (Future)
- **Channel:** #inventory-alerts
- **Critical:** @channel mention
- **High:** Regular message
- **Daily Summary:** Posted at 9 AM

## Monitoring and Metrics

### Alert Metrics
- Total alerts generated (by severity)
- Average acknowledgment time (by severity)
- Escalation rate (% of alerts escalated)
- Resolution time (from alert to resolution)
- False positive rate (alerts acknowledged without action)

### Performance Targets
- **Critical acknowledgment:** < 1 hour (95% of alerts)
- **High acknowledgment:** < 4 hours (90% of alerts)
- **Escalation rate:** < 10% (indicates proper staffing)
- **False positive rate:** < 5% (indicates accurate thresholds)

### Dashboard
- View metrics at `/inventory/alerts`
- Export alert history for analysis
- Weekly summary report

## Runbook Integration

### Daily Startup
1. Check `/inventory/alerts` for active alerts
2. Review overnight escalations
3. Prioritize critical and high alerts
4. Acknowledge and assign actions

### Daily Shutdown
1. Verify all critical alerts resolved or escalated
2. Review high alerts for next-day action
3. Update alert notes with progress
4. Log summary in decision log

## Troubleshooting

### Alert Not Appearing
1. Check Socket.IO connection status
2. Verify alert in database (`inventory_alert` table)
3. Check browser console for errors
4. Refresh dashboard

### False Positive Alerts
1. Review ROP calculation parameters
2. Check demand forecast accuracy
3. Adjust safety stock multiplier if needed
4. Update alert thresholds in configuration

### Missed Escalation
1. Check email delivery logs
2. Verify escalation rules in code
3. Review acknowledgment timestamps
4. Update escalation configuration if needed

## See Also

- [Inventory System Documentation](../integrations/inventory-system-complete.md)
- [ROP Engine Specification](../specs/inventory_spec.md)
- [Production Monitoring](./production_deployment.md)
- [Growth Engine HITL Workflow](../OPERATING_MODEL.md)

