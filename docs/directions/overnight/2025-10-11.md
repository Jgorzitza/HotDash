---
epoch: 2025.10.E1
doc: docs/directions/overnight/2025-10-11.md
owner: manager
last_reviewed: 2025-10-11
doc_hash: TBD
expires: 2025-10-18
---

# Overnight Execution Plan — 2025-10-11 (Auto-Run ON)

Global policy
- Auto-Run: ON. Do not prompt the manager for routine local work. Follow each role’s Local Execution Policy in docs/directions/<agent>.md and the unified process in docs/policies/agentfeedbackprocess.md.
- Blockers: After 2 safe retries, log a “BLOCKER” entry in your feedback/<agent>.md with sanitized errors and artifact paths, then append a short note to reports/overnight/2025-10-11/blockers.md (create file if missing). Move on to the next task without waiting for approval.
- Evidence: Every step must include timestamp, command/script, and artifact path(s) as per agentfeedbackprocess.md.
- Safety: Local, non-interactive only; disable pagers (git --no-pager) and avoid interactive tools; no remote infra changes or git mutations under auto-run.

Deep dive status snapshot (condensed)
- Reliability: Local Supabase is up; tooling stabilized after pager/permission loops. Next is sustained ?mock=0 < 300ms, health checks, and memory analysis plans (read-only).
- QA: Mock=1 smoke passes; typecheck OK; lint has errors; RLS checks pending for notification tables; need broader coverage and evidence bundles.
- Engineer: Supabase memory retry wrapper extended; Shopify helpers aligned to RR7 + App Bridge; continue lint cleanup and structured logging.
- Integrations: GA MCP credentials blocked; Chatwoot readiness tracked; MCP tools registered (refresh_index works); keep escalation evidence logging.
- Enablement/Marketing: Packets and scripts ready; approvals pending; ensure English-only and correct support inbox.
- Support: Gold reply runbook created; webhook coordination in progress; templates audited.
- Data: Supabase parity scripts running; schema snapshots produced; gold reply schema planning required.
- Product/Designer/Localization/Compliance: Frameworks in place; continue evidence production and audits.

Execution order: All roles run in parallel. If a dependency blocks you, log a blocker, create a follow-up note, and continue with independent tasks.

---

## Reliability — Overnight tasks
1) Synthetic latency check (?mock=0)
- Run twice per hour; record P95 in artifacts.
```bash path=null start=null
node scripts/ci/synthetic-check.mjs \
  --host=https://hotdash-staging.fly.dev \
  --mode=live \
  --out artifacts/reliability/$(date -u +%Y%m%dT%H%M%SZ)/synth.json
```
2) Health endpoint verification (Chatwoot, embedded)
- Save curl outputs and timestamps.
```bash path=null start=null
curl -fsS https://hotdash-chatwoot.fly.dev/hc \
  -o artifacts/reliability/$(date -u +%Y%m%dT%H%M%SZ)/chatwoot-hc.txt || true
curl -fsS https://hotdash-staging.fly.dev/hc \
  -o artifacts/reliability/$(date -u +%Y%m%dT%H%M%SZ)/embedded-hc.txt || true
```
3) Read-only Fly status sweep (no changes)
- If available; capture to artifacts (skip if token missing).
```bash path=null start=null
/home/justin/.fly/bin/fly apps list > artifacts/reliability/$(date -u +%Y%m%dT%H%M%SZ)/fly-apps.txt || true
/home/justin/.fly/bin/fly status -a hotdash-chatwoot \
  --json > artifacts/reliability/$(date -u +%Y%m%dT%H%M%SZ)/fly-chatwoot-status.json || true
```
4) Local Supabase readiness checks
```bash path=null start=null
npx supabase status --json > artifacts/reliability/$(date -u +%Y%m%dT%H%M%SZ)/supabase-status.json || true
psql "$DATABASE_URL" -c 'select now();' \
  > artifacts/reliability/$(date -u +%Y%m%dT%H%M%SZ)/psql-now.txt 2>&1 || true
```
5) occ-log local verification (tail + sample insert if safe)
- If edge function available locally, tail logs and store evidence; otherwise log blocker and proceed.

## Deployment — Overnight tasks
1) Env matrix parity (read-only validation)
```bash path=null start=null
grep -nE "SUPABASE_|SHOPIFY_|CHATWOOT_" docs/deployment/env_matrix.md \
  > artifacts/deployment/$(date -u +%Y%m%dT%H%M%SZ)/env-matrix-grep.txt
```
2) Runbook parity sweep (no edits)
- Save diffs and todo into artifacts.
```bash path=null start=null
rg -n "Supabase|sslmode=require|Upstash|session token" docs/deployment/ \
  > artifacts/deployment/$(date -u +%Y%m%dT%H%M%SZ)/runbook-parity.txt || true
```
3) Secret mirroring command plan (do not execute)
- Generate a command plan file with gh secret set commands using placeholders.
```bash path=null start=null
cat > artifacts/deployment/$(date -u +%Y%m%dT%H%M%SZ)/gh-secrets-plan.md <<'EOF'
# Staging
# gh secret set SUPABASE_DB_URL --env staging --body $SUPABASE_DB_URL
# gh secret set CHATWOOT_API_KEY --env staging --body $CHATWOOT_API_KEY
# Production (placeholder)
# gh secret set SUPABASE_DB_URL --env production --body {{SUPABASE_DB_URL_PROD}}
EOF
```
4) Fly memory scaling plan (do not execute)
- Prepare commands with placeholders and save as artifacts for morning review.

## Engineer — Overnight tasks
1) Typecheck, lint, unit tests (save logs)
```bash path=null start=null
npm run typecheck > artifacts/engineer/$(date -u +%Y%m%dT%H%M%SZ)/typecheck.log || true
npm run lint > artifacts/engineer/$(date -u +%Y%m%dT%H%M%SZ)/lint.log || true
npm run test:unit \
  > artifacts/engineer/$(date -u +%Y%m%dT%H%M%SZ)/unit-tests.log || true
```
2) Structured logging sweep
- Grep for console.(log|error|warn) and record locations for refactor.
```bash path=null start=null
grep -RnE "console\.(log|error|warn)" app/ packages/ \
  > artifacts/engineer/$(date -u +%Y%m%dT%H%M%SZ)/console-audit.txt || true
```
3) Shopify helper sanity (RR7 + App Bridge)
- Validate env utilities/imports; record notes in artifacts.

## QA — Overnight tasks
1) Local Supabase checks and migrations (read-only outputs)
```bash path=null start=null
npx supabase status --json > artifacts/qa/$(date -u +%Y%m%dT%H%M%SZ)/supabase-status.json || true
npm run setup > artifacts/qa/$(date -u +%Y%m%dT%H%M%SZ)/prisma-setup.log || true
```
2) Smoke tests
```bash path=null start=null
npm run test:e2e -- --grep "dashboard modals" \
  > artifacts/qa/$(date -u +%Y%m%dT%H%M%SZ)/playwright-smoke.log || true
```
3) RLS checklist scaffolding
- If notification tables exist locally, export RLS policies; else log blocker.

## AI — Overnight tasks
1) LlamaIndex loaders dry-run (no secrets printed)
```bash path=null start=null
node scripts/ai/llama-workflow/dist/loaders/sitemap.js \
  > artifacts/ai/$(date -u +%Y%m%dT%H%M%SZ)/sitemap.log 2>&1 || true
```
2) Index build sample + metrics
- Run small corpus index build; save metrics and sizes.
3) MCP tools validation plan
- Document refresh_index/query_support usage examples under artifacts/ai/.

## Data — Overnight tasks
1) Supabase schema snapshot (local)
```bash path=null start=null
pg_dump --schema-only "$DATABASE_URL" \
  > artifacts/data/$(date -u +%Y%m%dT%H%M%SZ)/schema.sql 2>&1 || true
```
2) Parity analyzers (read-only)
- Run analyzers over decision_sync_events/analytics_facts and save JSON summaries.
3) Gold reply schema plan
- Draft migration SQL with table and RLS notes in artifacts (no commit/push).

## Support — Overnight tasks
1) Webhook payload dry-run (local file only)
- Save sample JSON payload and validation checklist under artifacts/support/.
2) Operator enablement cross-check
- Ensure enablement and marketing references the correct inbox; save grep output.

## Chatwoot (Integrations-owned ops) — Overnight tasks
1) Readiness checklist updates (docs/integrations/)
- Log local validation evidence; no remote Fly changes.
2) API token + Redis keys plan (placeholders only)
- Save a plan markdown with commands and vault paths (do not run).

## Integrations — Overnight tasks
1) GA MCP escalation cadence (evidence)
- Append outreach evidence and timestamps; save under artifacts/integrations/.
2) MCP toolbox quick validation
- Document test plan for query_support/insight_report; do not execute remote ops.

## Enablement — Overnight tasks
1) Training scripts polish
- Save final Loom scripts and distribution checklist under artifacts/enablement/.
2) Rehearsal dependency tracker update
- Ensure dependency owners and due times are aligned; export to artifacts.

## Designer — Overnight tasks
1) Accessibility walkthrough prep
- Save checklists and focus-order notes to artifacts/collateral/.
2) Engineering handoff packet
- Bundle spec links and screenshots; log paths in feedback.

## Marketing — Overnight tasks
1) Approval packets
- Stage approvals and updated comms; export to artifacts/marketing/.
2) Admin tour rehearsal plan
- Draft sequence referencing RR7 + CLI dev flow (no token capture); save to artifacts.

## Localization — Overnight tasks
1) Grep-based scan (no ripgrep dependency needed)
```bash path=null start=null
grep -RInE "\b(fr|fr-FR|fr_CA)\b|Résumé|Bonjour" app/ docs/ \
  > artifacts/localization/$(date -u +%Y%m%dT%H%M%SZ)/scan.txt || true
```
2) UI copy audit checklist
- Note suspected non-English strings; log blockers if access required.

## Compliance — Overnight tasks
1) DPA/vendor follow-up log
- Append outreach evidence to artifacts/compliance/; sanitize sensitive text.
2) Retention drill plan (local)
- Draft commands and expected outputs; do not run destructive ops.

## Product — Overnight tasks
1) DEPLOY-147 anchor refresh
- Aggregate latest P95 latency and evidence links into artifacts/product/.
2) Morning brief preparation
- Prepare a one-pager linking each role’s top artifacts for the manager.

---

Completion criteria by morning
- Artifacts exist for each task (or blockers logged after 2 retries), with timestamps and command lines.
- reports/overnight/2025-10-11/blockers.md lists escalations per role (if any), with artifact links.
- No prompts were sent to manager during routine local tasks; all non-interactive and safe.
