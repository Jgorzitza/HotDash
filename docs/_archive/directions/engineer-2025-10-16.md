# Direction Archive — engineer — 2025-10-16

Source: docs/directions/engineer.md (archived daily objective)

## 15) Today's Objective (2025-10-16) — BLOCKER‑FIRST RESET

Status: ACTIVE
Priority: P0 — Unblock Approvals + Dashboard end‑to‑end (reflects Manager performance audit guidance)

Work rule: Execute tasks strictly in order. If blocked >10 focused minutes, log blocker in feedback/engineer/<today>.md and immediately move to the next task. No stopping until all tasks are complete.

Git Process (Manager‑Controlled)

- Do not run git; add “WORK COMPLETE – READY FOR PR” blocks in feedback; Manager will create Issues/PRs with Allowed paths and DoD.

Ordered Task List (30)

1. ApprovalsDrawer scaffold (shell only) — app/components/approvals/ApprovalsDrawer.tsx
2. approvals index barrel — app/components/approvals/index.ts
3. approvals fixtures — app/fixtures/approvals.ts (evidence, rollback, grades)
4. dashboard route shell — app/routes/dashboard.tsx (Polaris Layout + grid)
5. unit test: ApprovalsDrawer basic states — tests/unit/components/approvals/ApprovalsDrawer.spec.tsx
6. e2e happy path: dashboard→approvals — tests/e2e/approvals.e2e.spec.ts
7. ValidationBanner component — app/components/approvals/ValidationBanner.tsx
8. feature flags wiring — app/utils/feature-flags.ts (approvals on/off)
9. ApprovalsTile (pending count) — app/components/dashboard/ApprovalsTile.tsx
10. RevenueTile stub (resilient loads) — app/components/dashboard/RevenueTile.tsx
11. AOVTile stub — app/components/dashboard/AOVTile.tsx
12. ReturnsTile stub — app/components/dashboard/ReturnsTile.tsx
13. CXTile (queue + SLA badge) — app/components/dashboard/CXTile.tsx
14. SEOTile (top anomalies) — app/components/dashboard/SEOTile.tsx
15. StockRiskTile (low stock) — app/components/dashboard/StockRiskTile.tsx
16. keyboard nav hooks — app/hooks/useKeyboardNav.ts
17. focus trap hook — app/hooks/useFocusTrap.ts
18. accessibility annotations — apply ARIA to Drawer/tiles
19. error boundaries — app/components/ErrorBoundary.tsx
20. date range picker scaffold — app/components/DateRangePicker.tsx
21. lazy load tiles (code‑split) — route and tile-level
22. telemetry events — app/utils/telemetry.ts (open drawer, approve click)
23. HITL check — block Approve unless agents.json human_review true
24. Storybook stories — Drawer + three tiles
25. screenshot tests — tests/screenshot/dashboard.screenshot.spec.ts
26. integrate real clients when ready — swap mocks → integrations supabase/shopify
27. rollback plan snippet for drawer — docs/specs/approvals_ui_rollback.md (manager creates doc)
28. i18n key scaffolding — app/i18n/keys.ts (drawer strings only)
29. route guards + error states — unauthorized/API down
30. test coverage ≥85% across dashboard components (increase failing tests until met)

Current Focus: Tasks 1–4, then 5–7
Blockers: Expect data/integrations readiness; proceed with resilient stubs and tests until live.
Critical: Accessibility (WCAG 2.1 AA), P95 tile load <3s, Approve disabled until /validate OK.

### Artifact Source and Phase 2 — NORTH_STAR Delivery (22 tasks)

Note: Manager will restore code from docs/\_archive/2025-10-15-prebundle. Agents must not use git. Validate restored components locally and continue.

Phase 2 Tasks (execute strictly in order):

1. ApprovalsDrawer: evidence section polish (sticky headers, copy)
2. ApprovalsDrawer: grading UI with keyboard shortcuts
3. ApprovalsDrawer: validation error banner UX polish
4. ApprovalsTile: filter/sort/pagination
5. Dashboard: tile skeleton loaders + shimmer
6. Dashboard: layout density presets (compact/comfortable)
7. Telemetry: add event schemas + sampling
8. Error boundaries: per-tile fallback with retry
9. Feature flags: remote toggles wiring
10. i18n: extract strings for drawer + tiles
11. A11y: focus outlines + skip links on dashboard
12. Performance: code-split tiles + prefetch on idle
13. Storybook: regression stories for core states
14. Screenshot tests: mobile/tablet/desktop
15. Dark mode token alignment with Polaris
16. Route guards: auth and role-based checks
17. Health indicators: surface Integrations/Data health in UI
18. E2E: approve → applied → audited happy path
19. E2E: reject → learnings recorded path
20. Docs: approvals_ui_rollback.md (content stub; Manager to commit)
21. Docs: dashboard_tiles_contracts.md (content stub; Manager to commit)
22. PR readiness checklist evidence bundle (screens, test logs)
